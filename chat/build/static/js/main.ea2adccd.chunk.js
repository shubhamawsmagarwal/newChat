(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{21:function(e,t,a){e.exports=a(45)},26:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(20),o=a.n(r),c=(a(26),a(2)),i=a.n(c),l=a(8),m=a(10),u=a(4),h=a(7),p=a(3),f=a(6),d=a(5),v=a(9),b=a.n(v),E=function(e){Object(f.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"join-container"},s.a.createElement("header",{className:"join-header"},s.a.createElement("h1",null,"ChatApp")),s.a.createElement("main",{className:"join-main"},s.a.createElement("form",{onSubmit:function(t){t.preventDefault();var a=e.createRoom.value;e.props.createRoom(a)}},s.a.createElement("div",{className:"form-control"},s.a.createElement("label",null,"Create Room"),s.a.createElement("input",{type:"text",ref:function(t){e.createRoom=t},placeholder:"Enter room name...",required:!0})),s.a.createElement("button",{type:"submit",className:"btn"},"Create Room")),s.a.createElement("form",{onSubmit:function(t){t.preventDefault();var a=e.joinRoom.value;e.props.joinRoom(a)}},s.a.createElement("div",{className:"form-control"},s.a.createElement("label",null,"Join Room"),s.a.createElement("input",{type:"text",ref:function(t){e.joinRoom=t},placeholder:"Enter room name...",required:!0})),s.a.createElement("button",{type:"submit",className:"btn"},"Join Room"))))}}]),a}(n.Component),g=function(e){Object(f.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props.onlineUsers.map((function(e,t){return s.a.createElement("li",{key:t},e)})),a=this.props.messages.map((function(e,t){return s.a.createElement("div",{className:"message",key:t},s.a.createElement("p",{className:"meta"},e.username+"   ",s.a.createElement("span",null,e.time)),s.a.createElement("p",null,e.msg))}));return s.a.createElement("div",{className:"chat-container"},s.a.createElement("header",{className:"chat-header"},s.a.createElement("h1",null,"ChatApp"),s.a.createElement("button",{onClick:function(t){t.preventDefault(),e.props.leaveRoom()},className:"btn"},"Leave Room")),s.a.createElement("main",{className:"chat-main"},s.a.createElement("div",{className:"chat-sidebar"},s.a.createElement("h2",null,this.props.user),s.a.createElement("h3",null,"Room Name:"),s.a.createElement("h2",null,this.props.room),s.a.createElement("h3",null,"Online Users"),s.a.createElement("ul",null,t)),s.a.createElement("div",{className:"chat-messages"},a)),s.a.createElement("div",{className:"chat-form-container"},s.a.createElement("form",{onSubmit:function(t){t.preventDefault();var a=e.msg.value;e.props.send(a,e.props.user)}},s.a.createElement("input",{type:"text",ref:function(t){e.msg=t},placeholder:"Enter Message",required:!0,autoComplete:"off"}),s.a.createElement("button",{type:"submit",className:"btn"},"Send"))))}}]),a}(n.Component),j=function(e){Object(f.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"join-container"},s.a.createElement("header",{className:"join-header"},s.a.createElement("h1",null,"ChatApp")),s.a.createElement("main",{className:"join-main"},s.a.createElement("form",{onSubmit:function(t){t.preventDefault();var a=e.user.value;e.props.checkUsername(a)}},s.a.createElement("div",{className:"form-control"},s.a.createElement("label",null,"Username"),s.a.createElement("input",{type:"text",ref:function(t){e.user=t},placeholder:"Choose a username...",required:!0})),s.a.createElement("button",{type:"submit",className:"btn"},"Next"))))}}]),a}(n.Component),k=function(e){Object(f.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).ws=new WebSocket("wss://mnccesorvk.execute-api.us-east-1.amazonaws.com/a"),n.state={user:"",status:0,room:"",loading:!0,onlineUsers:[],messages:[],url:"https://4l8zeclpe0.execute-api.us-east-1.amazonaws.com/a"},n.checkUsername=n.checkUsername.bind(Object(h.a)(n)),n.createRoom=n.createRoom.bind(Object(h.a)(n)),n.joinRoom=n.joinRoom.bind(Object(h.a)(n)),n.leaveRoom=n.leaveRoom.bind(Object(h.a)(n)),n.send=n.send.bind(Object(h.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.ws.onopen=function(t){e.setState({loading:!1})},this.ws.onclose=function(){},this.ws.onmessage=function(t){var a=JSON.parse(t.data);if("disconnect"===a.action){var n="".concat(a.username," leaves chat");e.setState({onlineUsers:a.users,messages:[].concat(Object(m.a)(e.state.messages),[{username:"",msg:n,time:a.time}])})}else if("add"===a.action){var s="".concat(a.username," joins chat");e.setState({onlineUsers:a.users,messages:[].concat(Object(m.a)(e.state.messages),[{username:"",msg:s,time:a.time}])})}else"send"===a.action&&e.setState({messages:[].concat(Object(m.a)(e.state.messages),[{username:a.username,msg:a.msg,time:a.time}])})}}}]),Object(p.a)(a,[{key:"checkUsername",value:function(){var e=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!0,"user"===t&&(a=!1),e.next=4,b.a.get(this.state.url+"/checkusername",{params:{username:t}}).then((function(e){e.data.length>0&&(a=!1)})).catch((function(e){console.log(e.response)}));case 4:a?this.setState({user:t,status:1}):alert("Username not available");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createRoom",value:function(){var e=Object(l.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!0,"Default"===t&&(a=!1),e.next=4,b.a.get(this.state.url+"/checkroom",{params:{room:t}}).then((function(e){e.data.length>0&&(a=!1)})).catch((function(e){console.log(e.response)}));case 4:if(!a){e.next=12;break}return this.setState({loading:!0,room:t}),n=this.state.user,e.next=9,this.ws.send(JSON.stringify({action:"add",user:n,room:t}));case 9:this.setState({loading:!1,status:2}),e.next=13;break;case 12:alert("Room not available");case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"joinRoom",value:function(){var e=Object(l.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!0,"Default"===t&&(a=!1),e.next=4,b.a.get(this.state.url+"/checkroom",{params:{room:t}}).then((function(e){0===e.data.length&&(a=!1)})).catch((function(e){console.log(e.response)}));case 4:if(!a){e.next=12;break}return this.setState({loading:!0,room:t}),n=this.state.user,e.next=9,this.ws.send(JSON.stringify({action:"add",user:n,room:t}));case 9:this.setState({loading:!1,status:2}),e.next=13;break;case 12:alert("No such room exists");case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"leaveRoom",value:function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0,status:1,room:"",onlineUsers:[],messages:[]}),e.next=3,this.ws.send(JSON.stringify({action:"leave"}));case 3:this.setState({loading:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"send",value:function(){var e=Object(l.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,this.ws.send(JSON.stringify({action:"send",msg:t,user:a}));case 3:this.setState({loading:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.loading?s.a.createElement("div",null,"Loading..."):s.a.createElement("div",null,0===this.state.status?s.a.createElement(j,{checkUsername:this.checkUsername}):1===this.state.status?s.a.createElement(E,{joinRoom:this.joinRoom,createRoom:this.createRoom}):s.a.createElement(g,{send:this.send,leaveRoom:this.leaveRoom,user:this.state.user,room:this.state.room,messages:this.state.messages,onlineUsers:this.state.onlineUsers}))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.ea2adccd.chunk.js.map